<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kosta.starware.mapper.AttendMapper">



<!-- 리절트타입 사용하는 경우 -->
<!-- <select id="totalRecordWithPaging" resultType="kosta.starware.domain.AttendVO">
	<![CDATA[
	select attend_date,emp_no, attend_startTime, attend_endTime,
	attend_stateNo
	from
	(select /*+index_desc(attend XPKATTEND) */	
	rownum rn, attend_date,emp_no, attend_startTime, attend_endTime,
	attend_stateNo
	from attend
	where rownum<=#{pageNum}*#{amount}
	)
		where rn>(#{pageNum}-1)*#{amount}

	]]>

</select> -->


<select id="totalRecordWithPaging" resultType="kosta.starware.domain.AttendVO">
<![CDATA[
	select * from 
	(select /*+index_desc(attend XPKATTEND) */	
	rownum rn, a.emp_no, a.attend_date, e.emp_name, a.attend_startTime, a.attend_endTime, a.attend_stateNo
	from attend a, emp e
	where a.emp_no=e.emp_no
	and rownum<=#{pageNum}*#{amount}
	)
		where rn>(#{pageNum}-1)*#{amount}

	]]>

</select>


<select id="empRecordWithPaging" resultType="kosta.starware.domain.AttendVO">
select attend_date,emp_no, attend_startTime, attend_endTime,
	attend_stateNo
	from attend
	where emp_no=12301
	order by TO_CHAR(attend_date, 'YYYY-MM-DD HH24:MI:SS') desc

</select>

<select id="getAttendTotal" resultType="int">
select count(*) from attend

</select>

</mapper>

