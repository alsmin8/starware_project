<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kosta.starware.mapper.ApprovalMapper">

	<select id="appList" resultType="kosta.starware.domain.Approval">
		select * from approval
	</select>

	<insert id="appInsert">
		insert into approval (app_no, app_kind, app_title, app_startdate, app_enddate, app_situation, emp_no)
		values(app_no_seq.nextval, #{app_kind}, #{app_title}, sysdate, null, '결재요청', 12301)
	</insert>

	<insert id="appInsertSelectKey">
		<selectKey keyProperty="app_no" order="BEFORE" resultType="int">
			select app_no_seq.nextval from dual
		</selectKey>
		insert into approval (app_no, app_kind, app_title, app_startdate, app_enddate, app_situation, emp_no)
		values (#{app_no},	#{app_kind}, #{app_title}, sysdate, null,'결재요청', 12301)
	</insert>

	<select id="appDetail" resultType="kosta.starware.domain.Approval">
		select * from approval where app_no=#{app_no}
	</select>
	
	<delete id="appDelete">
		delete approval where app_no=#{app_no}
	</delete>
	
	<update id="appUpdate">
		update approval set app_title=#{app_title}, app_startdate = sysdate
		where app_no = #{app_no}
	</update>
</mapper>